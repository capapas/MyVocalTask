package fr.esgi.record_me;

import java.io.File;
import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.app.AlertDialog;
import android.util.Log;
import android.view.Menu;

public class Home extends Activity {
	private File file;
	private List<String> liste_;
	AlertDialog message;
    final String state = Environment.getExternalStorageState();
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_home);
		
		  getAllFilesOfDir(Environment.getExternalStorageDirectory());
		if ( Environment.MEDIA_MOUNTED.equals(state) || Environment.MEDIA_MOUNTED_READ_ONLY.equals(state) ) {  // we can read the External Storage...
		    getAllFilesOfDir(Environment.getExternalStorageDirectory());
		}
	   // message.setTitle("file");
		//
	 //   message.setMessage("hi");
   //  for(int i=0;i<list.length-1;i++) {
	//     liste_.add( list[i].getName());
	    
    	 // message.setTitle("file");
	   //  message.setMessage(list.length+"");
	     
    //     }
	  

	}

	@Override
	public boolean onCreateOptionsMenu(Menu menu) {
		// Inflate the menu; this adds items to the action bar if it is present.
		getMenuInflater().inflate(R.menu.home, menu);
		return true;
	}
	
	private void getAllFilesOfDir(File directory) {
	    Log.d(".mp4","Directory: " + directory.getAbsolutePath() + "\n");

	    final File[] files = directory.listFiles();

	    if ( files != null ) {
	        for ( File file : files ) {
	            if ( file != null ) {
	                if ( file.isDirectory() ) {  // it is a folder...
	                    getAllFilesOfDir(file);
	                }
	                else {  // it is a file...
	                    Log.d(".mp4", "File: " + file.getAbsolutePath() + "\n");
	                    message.setTitle("Path");
	                    message.setMessage( file.getAbsolutePath() + "\n");
	                }
	            }
	        }
	    }
	}
	
	private String[] getFilename() {
		String filepath = Environment.getExternalStorageDirectory().getPath();
		File file = new File(filepath,"*.*");
       // file.getName();
		//if (!file.exists()) {
		//	file.mkdirs();
	//	}

	//	return (file.getAbsolutePath() + "/" + System.currentTimeMillis() + ".mp4");
		return fileList(); 
	}

}
